<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../Estilos/Reporte_Estudiantes.css">
</head>
<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-danger" id="Titulo2">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="#">
          <img src="../Images/cecyteh_horizontal.png" alt="Logo" width="200" class="me-2">
        </a>
        <h1 id="Titulo" class="Titulo">Colegio de Estudios Científicos y Tecnológicos del Estado de Hidalgo</h1>
      </div>
    </nav>
  </header>

  <div id="titulo2">
    <h2>PANEL ADMINISTRACIÓN</h2>
  </div>

  <main class="d-flex" style="height:100vh;">
    <nav class="panel_lateral" style="width:250px;">
      <aside>
        <div class="list-group">
          <a href="historial.html" class="list-group-item list-group-item-action">
            <i class="fa-solid fa-file-lines me-2"></i> Historial
          </a>
          <a href="estudiantes.html" class="list-group-item list-group-item-action">
            <i class="fa-solid fa-user-graduate me-2"></i> Estudiantes
          </a>
          <a href="docentes.html" class="list-group-item list-group-item-action">
            <i class="fa-solid fa-chalkboard-user me-2"></i> Personal
          </a>
          <a href="reportes.html" class="list-group-item list-group-item-action">
            <i class="fa-solid fa-chart-line me-2"></i> Reportes
          </a>
          <a href="configuracion.html" class="list-group-item list-group-item-action">
            <i class="fa-solid fa-gear me-2"></i> Configuración
          </a>
          <a href="verificación.html" class="list-group-item list-group-item-action">
            <i class="fa-solid fa-check me-2"></i> Verificación
          </a>
          <a href="login.html" class="list-group-item list-group-item-action">
            <i class="fa-solid fa-sign-out-alt me-2"></i> Salir
          </a>
        </div>
      </aside>
    </nav>

    <section>
      <h2>Fecha y Tipo de Reporte</h2>

      <!-- Calendario -->
      <label for="fecha_inicio">Fecha Inicio:</label>
      <input type="date" id="fecha_inicio" name="fecha_inicio" class="form-control mb-3">

      <label for="fecha_fin">Fecha Fin:</label>
      <input type="date" id="fecha_fin" name="fecha_fin" class="form-control mb-3">

      <!-- Menú: ¿Qué deseas hacer? -->
      <label for="accion"><strong>¿Qué deseas hacer?</strong></label>
      <select id="accion" class="form-select mb-3" onchange="mostrarOpciones()">
        <option value="" disabled selected>-- Selecciona una acción --</option>
        <option value="generar">Generar reporte</option>
        <option value="modificar">Modificar reporte</option>
      </select>

      <!-- Opciones para generar -->
      <div id="opciones_generar" style="display:none;">
        <label for="reporte"><strong>Tipo de reporte</strong></label>
        <select id="reporte" name="reporte" class="form-select mb-3">
          <option value="" disabled selected>-- Selecciona una opción --</option>
          <option value="Generar_Reporte_Estudiantes_General.html">Reporte General</option>
          <option value="Generar_Reporte_Estudiantes_Asistencias.html">Asistencias</option>
          <option value="Generar_Reporte_Estudiantes_Inasistencias.html">Inasistencias</option>
          <option value="Generar_Reporte_Estudiantes_Justifiaciones.html">Justificaciones</option>
        </select>
        <button onclick="redirigir('generar')" class="btn btn-danger">Generar reporte</button>
      </div>

      <!-- Botón para modificar -->
      <div id="opciones_modificar" style="display:none;">
        <button onclick="redirigir('modificar')" class="btn btn-primary">Modificar reporte</button>
      </div>

      <script>
        function mostrarOpciones() {
          const accion = document.getElementById("accion").value;
          document.getElementById("opciones_generar").style.display = accion === "generar" ? "block" : "none";
          document.getElementById("opciones_modificar").style.display = accion === "modificar" ? "block" : "none";
        }

        function redirigir(tipo) {
          const fechaInicio = document.getElementById("fecha_inicio").value;
          const fechaFin = document.getElementById("fecha_fin").value;

          if (!fechaInicio || !fechaFin) {
            alert("Por favor selecciona el rango de fechas.");
            return;
          }

          if (fechaFin < fechaInicio) {
            alert("La fecha final no puede ser anterior a la fecha de inicio.");
            return;
          }

          if (tipo === "generar") {
            const destino = document.getElementById("reporte").value;
            if (!destino) {
              alert("Por favor selecciona un tipo de reporte.");
              return;
            }
            window.location.href = `${destino}?inicio=${fechaInicio}&fin=${fechaFin}`;
          }

          if (tipo === "modificar") {
            window.location.href = `Modificar_Reporte_Estudiantes.html?inicio=${fechaInicio}&fin=${fechaFin}`;
          }
        }
      </script>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>