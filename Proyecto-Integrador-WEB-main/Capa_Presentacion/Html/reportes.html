<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../Estilos/Reportes.css">

</head>
<body>
     <header>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-danger" id="Titulo2">
            <div class="container-fluid">
                <a class="navbar-brand d-flex align-items-center" href="#">
                <img src="../Images/cecyteh_horizontal.png" alt="Logo" width="200" class="me-2">
                </a>
                <h1 id="Titulo" class="Titulo">Colegio de Estudios Científicos y Tecnológicos del Estado de Hidalgo</h1>     
            </div>
        </nav>
    </header> 
        <div id="titulo2">
            <h2>PANEL ADMINISTRACIÓN</h2>
        </div>   
    <main class="d-flex" style="height:100vh;">
        <nav class="panel_lateral"  style="width:250px;">
            <aside>
  <div class="list-group">
    <a href="historial.html" class="list-group-item list-group-item-action">
      <i class="fa-solid fa-file-lines me-2"></i> Historial
    </a>
    <a href="estudiantes.html" class="list-group-item list-group-item-action">
      <i class="fa-solid fa-user-graduate me-2"></i> Estudiantes
    </a>
    <a href="docentes.html" class="list-group-item list-group-item-action">
      <i class="fa-solid fa-chalkboard-user me-2"></i> Personal
    </a>
    <a href="reportes.html" class="list-group-item list-group-item-action">
      <i class="fa-solid fa-chart-line me-2"></i> Reportes
    </a>
    <a href="configuracion.html" class="list-group-item list-group-item-action">
      <i class="fa-solid fa-user me-2"></i> Agregar a la comunidad
    </a>
    <a href="configuracion.html" class="list-group-item list-group-item-action">
      <i class="fa-solid fa-plus me-2"></i> Añadir Cuenta
    </a>
    <a href="Verificacion_Usuarios.html" class="list-group-item list-group-item-action">
      <i class="fa-solid fa-check me-2"></i> Verificación
    </a>
    <a href="login.html" class="list-group-item list-group-item-action">
      <i class="fa-solid fa-sign-out-alt me-2"></i> Salir
    </a>
  </div>
</aside>
      </nav>  
      <section>
        <section>
  <h2>Fecha y Tipo de Reporte</h2>

  <!-- Calendario -->
  <label for="Fecha_Inicio">Fecha Inicio:</label>
  <input type="date" id="Fecha_Inicio" name="Fecha_Inicio" class="form-control mb-3">

   <label for="Fecha_Fin">Fecha Fin:</label>
  <input type="date" id="Fecha_Fin" name="fecha" class="form-control mb-3">

  <!-- Menú desplegable 1: Carrera -->
  <label for="comunidad"><strong>Comunidad educativa</strong></label>
  <select id="comunidad" name="comunidad" class="form-select mb-3">
    <option value="" disabled selected>-- Selecciona una opción --</option>
    <option value="estudiantes">Estudiantes</option>
    <option value="docentes">Docentes</option>
    <option value="Personal administrativo y directivo">Personal administrativo y directivo</option>
    
  </select>

   <div id="camposEstudiante">
    <!--Carreras-->
     <label for="carreras"><strong>Carrera</strong></label>
     <select id="carreras" name="carreras" class="form-select mb-3">
       <option value="" disabled selected>-- Selecciona una opción --</option>
       <option value="Laboratorio Clinico">Laboratorio Clinico</option>
       <option value="Enfermeria General">Enfermeria General</option>
       <option value="Mecatronico">Mecatronica</option>
    
     </select>
     <!--Semestre-->
     <label for="Semestre"><strong>Semestre</strong></label>
     <select id="Semestre" name="Semestre" class="form-select mb-3">
       <option value="" disabled selected>-- Selecciona una opción --</option>
       <option value="Primero">Primero</option>
       <option value="Segundo">Segundo</option>
       <option value="Tercero">Tercero</option>
       <option value="Cuarto">Cuarto</option>
       <option value="Quinto">Quinto</option>
       <option value="Sexto">Sexto</option>
     </select>
     <!--Grupo-->
     <label for="Grupo"><strong>Grupo</strong></label>
     <select id="Grupo" name="Grupo" class="form-select mb-3">
       <option value="" disabled selected>-- Selecciona una opción --</option>
       <option value="A">A</option>
       <option value="B">B</option>
       <option value="C">C</option>
       <option value="D">D</option>
     </select>
   </div>

  <!-- Menú desplegable 2: Tipo de reporte -->
  <label for="reporte"><strong>Tipo de reporte</strong></label>
  <select id="reporte" name="reporte" class="form-select mb-3">
    <option value="" disabled selected>-- Selecciona una opción --</option>
    <option value="Reporte General">Reporte General</option>
    <option value="Asistencias">Asistencias</option>
    <option value="Inasistencias">Inasistencias</option>
    <option value="justificacion">Justificaciones</option>
    
  </select>
  <div class="d-flex gap-3 mt-4">
  <button onclick="redirigir()" class="btn btn-danger">Generar reporte </button>
</div>
<script>
  const comunidad = document.getElementById("comunidad");
  const camposEstudiante = document.getElementById("camposEstudiante");

  comunidad.addEventListener("change", function () {
    const seleccion = this.value;
    camposEstudiante.style.display = (seleccion === "estudiantes") ? "block" : "none";
  });

  function redirigir() {
  const seleccion = comunidad.value;
  const reporte = document.getElementById("reporte").value;
  const fechaInicio = document.getElementById("Fecha_Inicio").value;
  const fechaFin = document.getElementById("Fecha_Fin").value;

  if (!seleccion || !reporte || !fechaInicio || !fechaFin) {
    alert("Completa todos los campos requeridos.");
    return;
  }

  if (fechaFin < fechaInicio) {
    alert("La fecha final no puede ser anterior a la fecha de inicio.");
    return;
  }

  let destino = "";

  if (seleccion === "estudiantes") {
    const carrera = document.getElementById("carreras").value;
    const semestre = document.getElementById("Semestre").value;
    const grupo = document.getElementById("Grupo").value;

    if (!carrera || !semestre || !grupo) {
      alert("Completa todos los campos de estudiante.");
      return;
    }

    if (reporte === "Asistencias") destino = "Reportes_Grupales_Estudiantes_Asistencias.html";
    else if (reporte === "Reporte General") destino = "Reportes_Grupales_Estudiantes_General.html";
    else if (reporte === "Inasistencias") destino = "Reportes_Grupales_Estudiantes_Inasistencias.html";
    else if (reporte === "justificacion") destino = "Reportes_Grupales_Estudiantes_justificaciones.html";

    if (destino) {
      window.location.href = `${destino}?inicio=${fechaInicio}&fin=${fechaFin}&carrera=${carrera}&semestre=${semestre}&grupo=${grupo}`;
      return;
    }
  }

  if (seleccion === "docentes") {
    if (reporte === "Asistencias") destino = "Reportes_Grupales_Docentes_Asistencias.html";
    else if (reporte === "Reporte General") destino = "Reportes_Grupales_Docentes_General.html";
    else if (reporte === "Inasistencias") destino = "Reportes_Grupales_Docentes_Inasistencias.html";
    else if (reporte === "justificacion") destino = "Reportes_Grupales_Docentes_Justificaciones.html";

    if (destino) {
      window.location.href = `${destino}?inicio=${fechaInicio}&fin=${fechaFin}`;
      return;
    }
  }

  if (seleccion === "Personal administrativo y directivo") {
    if (reporte === "Asistencias") destino = "Reportes_Grupales_Administrativo_Asistencias.html";
    else if (reporte === "Reporte General") destino = "Reportes_Grupales_Administrativo_General.html";
    else if (reporte === "Inasistencias") destino = "Reportes_Grupales_Administrativo_Inasistencias.html";
    else if (reporte === "justificacion") destino = "Reportes_Grupales_Administrativo_Justificaciones.html";

    if (destino) {
      window.location.href = `${destino}?inicio=${fechaInicio}&fin=${fechaFin}`;
      return;
    }
  }

  alert("No se encontró una ruta para ese tipo de reporte.");
}
</script>
     

</section>
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>